<html>
<head>
  <script src="chloe.js" type="text/javascript"></script>
  <script type="text/javascript">
    function getQueryObj(uri) {
      var result = {};
      var keyValuePairs = uri.slice(1).split('&');

      keyValuePairs.forEach(function(keyValuePair) {
        keyValuePair = keyValuePair.split('=');
        result[keyValuePair[0]] = keyValuePair[1] || '';
      });

      return result;
    }

    var queryObj = getQueryObj(location.search);
    var ownerId;
    if (queryObj["ownerId"]) {
        ownerId = queryObj["ownerId"];
    }
    chloe.init(decodeURIComponent(queryObj["app"]), decodeURIComponent(queryObj["channel"]), decodeURIComponent(queryObj["chloeUri"]), ownerId, function(msg) {
      document.getElementById("container").innerHTML = JSON.stringify(msg) + "<br /><br />" + document.getElementById("container").innerHTML;
    });
  </script>
</head>
<body>
  <div id="container">
  </div>
</body>
</html>
